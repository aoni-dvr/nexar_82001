/**
 *  @file AmbaYuv_LT6911Table.c
 *
 *  @copyright Copyright (c) 2015 Ambarella, Inc.
 *
 *  This file and its contents ("Software") are protected by intellectual property rights including, without limitation,
 *  U.S. and/or foreign copyrights.  This Software is also the confidential and proprietary information of Ambarella, Inc.
 *  and its licensors.  You may not use, reproduce, disclose, distribute, modify, or otherwise prepare derivative works
 *  of this Software or any portion thereof except pursuant to a signed license agreement or nondisclosure agreement with
 *  Ambarella, Inc. or its authorized affiliates.  In the absence of such an agreement, you agree to promptly notify and
 *  return this Software to Ambarella, Inc.
 *
 *  THIS SOFTWARE IS PROVIDED "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 *  WARRANTIES OF NON-INFRINGEMENT, MERCHANTABILITY, AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL
 *  AMBARELLA, INC. OR ITS AFFILIATES BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 *  DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
 *  COMPUTER FAILURE OR MALFUNCTION; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 *  CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 *  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 *  @details Control APIs of OmniVision LT6911 CMOS sensor with MIPI interface
 *
 */

#include "AmbaYuv.h"
#include "AmbaYuv_LT6911.h"

const LT6911_REG_s AudioI2sRegTable[LT6911_NUM_AUDIO_I2S_REG] = {
#if defined(CONFIG_BSP_CV25DK_V100) || defined(CONFIG_BSP_CV25DK_8LAYER_V110)
    {0x9006, 0xFF},
#else
    {0x9006, 0x99},
#endif
    {0xB000, 0x00},
    {0xB08C, 0x07},
    {0xB08D, 0x77},
    {0xB08E, 0x07},
    {0xB08F, 0x77},
    {0xD113, 0x02},
    {0xD114, 0x19},
    {0xD115, 0xC2},
    {0xD110, 0x30},
    {0xD129, 0xFF},
    {0xD12A, 0xFF},
    {0xD143, 0xB3},
    {0xD146, 0x6B},
    {0xD147, 0xCE},
    {0xD148, 0xF3},
    {0xD149, 0xAF},
    {0xD143, 0xBB},
    {0xD145, 0x22},
    {0xD145, 0x02},
    {0xD110, 0x70},
    {0xD118, 0xFF},
    {0xD119, 0xFF},
    {0xD110, 0x30},
    {0xD118, 0x00},
    {0xD119, 0x00}
};

const LT6911_REG_s RxPhyRegTable[LT6911_NUM_RX_PHY_REG] = {
    {0xA031, 0xF0},
    {0xB02E, 0x20},
    {0xB029, 0x00},
    {0xB030, 0x48},
    {0xB032, 0x05},
    {0xB821, 0x55},
    {0xB83A, 0x40},
    {0xD283, 0x11}
};

const LT6911_REG_s TxPhyRegTable[LT6911_NUM_TX_PHY_REG] = {
    {0xA035,0x43},
    {0xA036,0x21},
    {0xA037,0x04},
#if defined(CONFIG_BSP_CV25DK_V100) || defined(CONFIG_BSP_CV25DK_8LAYER_V110)
    {0xA038,0x32},
    {0xA039,0x10},
#else
    {0xA038,0x31},
    {0xA039,0x02},
#endif
    {0xA03A,0x43},
    {0xA03B,0x21},
#if defined(CONFIG_BSP_CV25DK_V100) || defined(CONFIG_BSP_CV25DK_8LAYER_V110)
    {0xA03C,0x04},
    {0xA03D,0x31},
    {0xA03E,0x02},
#else
    {0xA03C,0x02},
    {0xA03D,0x43},
    {0xA03E,0x10},
#endif

#if defined(CONFIG_BSP_CV25DK_V100) || defined(CONFIG_BSP_CV25DK_8LAYER_V110)
    {0xB079,0x40},
    {0xB07E,0x94},
    {0xB080,0x94},
    {0xB082,0x94},
    {0xB084,0x94},
    {0xB086,0x94},
    {0xB07A,0x51},
#else
    {0xB079,0xC0},
    {0xB07E,0xd4},
    {0xB080,0xd4},
    {0xB082,0xd4},
    {0xB084,0xd4},
    {0xB086,0xd4},
    {0xB07A,0x11},
#endif
};

const LT6911_REG_s RxPllEnableRegTable[LT6911_NUM_RX_PLL_ENABLE_REG] = {
    {0xB092, 0xBF},
    {0xB021, 0x00},
    {0xB022, 0xC1},
    {0xB028, 0x09},
    {0xB025, 0x2C},
};

const LT6911_REG_s TxPortRegTable[LT6911_NUM_TX_PORT_REG] = {
    {0xA043, 0xFF},  /* LRMODE = 0 */
    {0xB055, 0x34},
    {0xB05D, 0x9f},
    {0xB05F, 0x9f},
    {0xB061, 0x9f},
    {0xB063, 0x9f},
    {0xB065, 0x9f},
    {0xB077, 0x34},
    {0xB07F, 0x9f},
    {0xB081, 0x9f},
    {0xB083, 0x9f},
    {0xB085, 0x9f},
    {0xB087, 0x9f}
};


UINT8 EdidRegTable[LT6911_NUM_YUV_MODE][LT6911_NUM_EDID_REG] = {
    [LT6911_3840_2160_30P] = {
        0x00,0xff,0xff,0xff,0xff,0xff,0xff,0x00,
        0x32,0x8d,0x32,0x31,0x00,0x88,0x88,0x88,
        0x08,0x1c,0x01,0x03,0x80,0x0c,0x07,0x78,
        0x0a,0x0d,0xc9,0xa0,0x57,0x47,0x98,0x27,
        0x12,0x48,0x4c,0x00,0x00,0x00,0x01,0x01,
        0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
        0x01,0x01,0x01,0x01,0x01,0x01,0x04,0x74,
        0x00,0x30,0xF2,0x70,0x5A,0x80,0xB0,0x58,
        0x8A,0x00,0x80,0x38,0x74,0x00,0x00,0x1E,
        0x04,0x74,0x00,0x30,0xF2,0x70,0x5A,0x80,
        0xB0,0x58,0x8A,0x00,0x80,0x38,0x74,0x00,
        0x00,0x1E,0x00,0x00,0x00,0xFD,0x00,0x32,
        0x3C,0x14,0x3c,0x1E,0x00,0x0A,0x20,0x20,
        0x20,0x20,0x20,0x20,0x00,0x00,0x00,0xfc,
        0x00,0x4c,0x54,0x36,0x39,0x31,0x31,0x43,
        0x0a,0x20,0x20,0x20,0x20,0x20,0x01,0x21, /* Block0 */

        0x02,0x03,0x1A,0xF0,0x47,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x23,0x09,0x06,0x05,
        0x83,0x01,0x00,0x00,0x65,0x03,0x0c,0x00,
        0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x6B  /* Block1 */
    },
    [LT6911_1920_1080_60P] = {
        0x00,0xff,0xff,0xff,0xff,0xff,0xff,0x00,
        0x32,0x8d,0x32,0x31,0x00,0x88,0x88,0x88,
        0x08,0x1c,0x01,0x03,0x80,0x0c,0x07,0x78,
        0x0a,0x0d,0xc9,0xa0,0x57,0x47,0x98,0x27,
        0x12,0x48,0x4c,0x00,0x00,0x00,0x01,0x01,
        0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
        0x01,0x01,0x01,0x01,0x01,0x01,0x02,0x3A,
        0x80,0x18,0x71,0x38,0x2D,0x40,0x58,0x2C,
        0x45,0x00,0xC4,0x8E,0x21,0x00,0x00,0x1E,
        0x02,0x3A,0x80,0x18,0x71,0x38,0x2D,0x40,
        0x58,0x2C,0x45,0x00,0xC4,0x8E,0x21,0x00,
        0x00,0x1E,0x00,0x00,0x00,0xFD,0x00,0x32,
        0x3C,0x14,0x3c,0x1E,0x00,0x0A,0x20,0x20,
        0x20,0x20,0x20,0x20,0x00,0x00,0x00,0xfc,
        0x00,0x4c,0x54,0x36,0x39,0x31,0x31,0x43,
        0x0a,0x20,0x20,0x20,0x20,0x20,0x01,0x19, /* Block0 */

        0x02,0x03,0x1A,0xF1,0x47,0x90,0x00,0x00,
        0x00,0x00,0x00,0x00,0x23,0x09,0x06,0x05,
        0x83,0x01,0x00,0x00,0x65,0x03,0x0c,0x00,
        0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xe0  /* Block1 */
    },
    [LT6911_1920_1080_30P] = {
        0x00,0xff,0xff,0xff,0xff,0xff,0xff,0x00,
        0x32,0x8d,0x32,0x31,0x00,0x88,0x88,0x88,
        0x08,0x1c,0x01,0x03,0x80,0x0c,0x07,0x78,
        0x0a,0x0d,0xc9,0xa0,0x57,0x47,0x98,0x27,
        0x12,0x48,0x4c,0x00,0x00,0x00,0x01,0x01,
        0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
        0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x1d,
        0x80,0x18,0x71,0x38,0x2D,0x40,0x58,0x2C,
        0x45,0x00,0xC4,0x8E,0x21,0x00,0x00,0x1E,
        0x01,0x1d,0x80,0x18,0x71,0x38,0x2D,0x40,
        0x58,0x2C,0x45,0x00,0xC4,0x8E,0x21,0x00,
        0x00,0x1E,0x00,0x00,0x00,0xFD,0x00,0x32,
        0x3C,0x14,0x3c,0x1E,0x00,0x0A,0x20,0x20,
        0x20,0x20,0x20,0x20,0x00,0x00,0x00,0xfc,
        0x00,0x4c,0x54,0x36,0x39,0x31,0x31,0x43,
        0x0a,0x20,0x20,0x20,0x20,0x20,0x01,0x55, /* Block0 */

        0x02,0x03,0x1A,0xF1,0x47,0xA2,0x00,0x00,
        0x00,0x00,0x00,0x00,0x23,0x09,0x06,0x05,
        0x83,0x01,0x00,0x00,0x65,0x03,0x0c,0x00,
        0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC8  /* Block1 */
    },
    [LT6911_1280_720_60P] = {
        0x00,0xff,0xff,0xff,0xff,0xff,0xff,0x00,
        0x32,0x8d,0x32,0x31,0x00,0x88,0x88,0x88,
        0x08,0x1c,0x01,0x03,0x80,0x0c,0x07,0x78,
        0x0a,0x0d,0xc9,0xa0,0x57,0x47,0x98,0x27,
        0x12,0x48,0x4c,0x00,0x00,0x00,0x01,0x01,
        0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
        0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x1d,
        0x00,0x72,0x51,0xD0,0x1E,0x20,0x6e,0x28,
        0x55,0x00,0xC4,0x8E,0x21,0x00,0x00,0x1E,
        0x01,0x1d,0x00,0x72,0x51,0xD0,0x1E,0x20,
        0x6e,0x28,0x55,0x00,0xC4,0x8E,0x21,0x00,
        0x00,0x1E,0x00,0x00,0x00,0xFD,0x00,0x32,
        0x3C,0x14,0x3c,0x1E,0x00,0x0A,0x20,0x20,
        0x20,0x20,0x20,0x20,0x00,0x00,0x00,0xfc,
        0x00,0x4c,0x54,0x36,0x39,0x31,0x31,0x43,
        0x0a,0x20,0x20,0x20,0x20,0x20,0x01,0xCB, /* Block0 */

        0x02,0x03,0x1A,0xF1,0x47,0x84,0x00,0x00,
        0x00,0x00,0x00,0x00,0x23,0x09,0x06,0x05,
        0x83,0x01,0x00,0x00,0x65,0x03,0x0c,0x00,
        0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xE6  /* Block1 */
    },
    [LT6911_1280_720_30P] = {
        0x00,0xff,0xff,0xff,0xff,0xff,0xff,0x00,
        0x32,0x8d,0x32,0x31,0x00,0x88,0x88,0x88,
        0x08,0x1c,0x01,0x03,0x80,0x0c,0x07,0x78,
        0x0a,0x0d,0xc9,0xa0,0x57,0x47,0x98,0x27,
        0x12,0x48,0x4c,0x00,0x00,0x00,0x01,0x01,
        0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
        0x01,0x01,0x01,0x01,0x01,0x01,0x80,0x0E,
        0x00,0x72,0x51,0xD0,0x1E,0x20,0x6e,0x28,
        0x55,0x00,0xC4,0x8E,0x21,0x00,0x00,0x1E,
        0x80,0x0E,0x00,0x72,0x51,0xD0,0x1E,0x20,
        0x6e,0x28,0x55,0x00,0xC4,0x8E,0x21,0x00,
        0x00,0x1E,0x00,0x00,0x00,0xFD,0x00,0x32,
        0x3C,0x14,0x3c,0x1E,0x00,0x0A,0x20,0x20,
        0x20,0x20,0x20,0x20,0x00,0x00,0x00,0xfc,
        0x00,0x4c,0x54,0x36,0x39,0x31,0x31,0x43,
        0x0a,0x20,0x20,0x20,0x20,0x20,0x01,0xEB, /* Block0 */

        0x02,0x03,0x1A,0xF0,0x47,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x23,0x09,0x06,0x05,
        0x83,0x01,0x00,0x00,0x65,0x03,0x0c,0x00,
        0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x6B  /* Block1 */
    },
};

const LT6911_MODE_TIMING_s LT6911ModeTiming[LT6911_NUM_YUV_MODE] = {
    /* LT6911_3840_2160_30P */ { 176, 88, 296, 3840, 4400, 8, 10,  72, 2160, 2250},
    /* LT6911_1920_1080_60P */ {  88, 44, 148, 1920, 2200, 4,  5,  36, 1080, 1125},
    /* LT6911_1920_1080_30P */ {  88, 44, 148, 1920, 2200, 4,  5,  36, 1080, 1125},
    /* LT6911_1280_720_60P  */ { 110, 40, 220, 1280, 1650, 5,  5,  20,  720,  750},
    /* LT6911_1280_720_30P  */ { 110, 40, 220, 1280, 1650, 5,  5,  20,  720,  750},
};

const LT6911_MODE_INFO_s LT6911ModeInfo[LT6911_NUM_YUV_MODE] = {
    /* LT6911_3840_2160_30P */ {600U, 4U, {1200000000, 3840, 2160, {0, 0, 3840, 2160}, AMBA_YUV_YUV_ORDER_CB_Y0_CR_Y1, {.Interlace = 0, .TimeScale =  30000, .NumUnitsInTick = 1001}}},
    /* LT6911_1920_1080_60P */ {600U, 2U, {1200000000, 1920, 1080, {0, 0, 1920, 1080}, AMBA_YUV_YUV_ORDER_CB_Y0_CR_Y1, {.Interlace = 0, .TimeScale =  60000, .NumUnitsInTick = 1001}}},
    /* LT6911_1920_1080_30P */ {320U, 2U, { 640000000, 1920, 1080, {0, 0, 1920, 1080}, AMBA_YUV_YUV_ORDER_CB_Y0_CR_Y1, {.Interlace = 0, .TimeScale =  30000, .NumUnitsInTick = 1001}}},
    /* LT6911_1280_720_60P  */ {320U, 2U, { 640000000, 1280,  720, {0, 0, 1280,  720}, AMBA_YUV_YUV_ORDER_CB_Y0_CR_Y1, {.Interlace = 0, .TimeScale =  60000, .NumUnitsInTick = 1001}}},
    /* LT6911_1280_720_30P  */ {160U, 2U, { 320000000, 1280,  720, {0, 0, 1280,  720}, AMBA_YUV_YUV_ORDER_CB_Y0_CR_Y1, {.Interlace = 0, .TimeScale =  30000, .NumUnitsInTick = 1001}}},
};

