/**
 *  @file AmbaSensor_IMX577Table.c
 *
 *  Copyright (c) 2020 Ambarella International LP
 *
 *  This file and its contents ("Software") are protected by intellectual
 *  property rights including, without limitation, U.S. and/or foreign
 *  copyrights. This Software is also the confidential and proprietary
 *  information of Ambarella International LP and its licensors. You may not use, reproduce,
 *  disclose, distribute, modify, or otherwise prepare derivative works of this
 *  Software or any portion thereof except pursuant to a signed license agreement
 *  or nondisclosure agreement with Ambarella International LP or its authorized affiliates.
 *  In the absence of such an agreement, you agree to promptly notify and return
 *  this Software to Ambarella International LP.
 *
 *  This file includes sample code and is only for internal testing and evaluation.  If you
 *  distribute this sample code (whether in source, object, or binary code form), it will be
 *  without any warranty or indemnity protection from Ambarella International LP or its affiliates.
 *
 *  THIS SOFTWARE IS PROVIDED "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES,
 *  INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF NON-INFRINGEMENT,
 *  MERCHANTABILITY, AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 *  IN NO EVENT SHALL AMBARELLA INTERNATIONAL LP OR ITS AFFILIATES BE LIABLE FOR ANY DIRECT,
 *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 *  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 *  LOSS OF USE, DATA, OR PROFITS; COMPUTER FAILURE OR MALFUNCTION; OR BUSINESS
 *  INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 *  CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 *  POSSIBILITY OF SUCH DAMAGE.
 *
 *  @details Control APIs of SONY IMX577 CMOS sensor with LVDS interface
 *
 */

#include "AmbaSensor.h"
#include "AmbaSensor_IMX577.h"

/*-----------------------------------------------------------------------------------------------*\
 * Sensor Device Information
\*-----------------------------------------------------------------------------------------------*/
const AMBA_SENSOR_DEVICE_INFO_s IMX577DeviceInfo = {
    .UnitCellWidth          = (FLOAT)1.55,
    .UnitCellHeight         = (FLOAT)1.55,
    .NumTotalPixelCols      = 4072,
    .NumTotalPixelRows      = 3176,
    .NumEffectivePixelCols  = 4056,
    .NumEffectivePixelRows  = 3040,
    .MinAnalogGainFactor    = 1.0f,
    .MaxAnalogGainFactor    = (FLOAT)22.2608695652174,  /* 26.951 dB */
    .MinDigitalGainFactor   = 1.0f,
    .MaxDigitalGainFactor   = (FLOAT)15.99609375,       /* 24.080 dB */

    .FrameRateCtrlInfo = {
        .CommunicationTime      = AMBA_SENSOR_COMMUNICATION_AT_NON_VBLANK,
        .FirstReflectedFrame    = 3,
        .FirstBadFrame          = 0,
        .NumBadFrames           = 0
    },
    .ShutterSpeedCtrlInfo = {
        .CommunicationTime      = AMBA_SENSOR_COMMUNICATION_AT_NON_VBLANK,
        .FirstReflectedFrame    = 2,
        .FirstBadFrame          = 0,
        .NumBadFrames           = 0
    },
    .AnalogGainCtrlInfo = {
        .CommunicationTime      = AMBA_SENSOR_COMMUNICATION_AT_NON_VBLANK,
        .FirstReflectedFrame    = 2,
        .FirstBadFrame          = 0,
        .NumBadFrames           = 0
    },
    .DigitalGainCtrlInfo = {
        .CommunicationTime      = AMBA_SENSOR_COMMUNICATION_AT_NON_VBLANK,
        .FirstReflectedFrame    = 2,
        .FirstBadFrame          = 0,
        .NumBadFrames           = 0
    },
    .WbGainCtrlInfo = {
        .CommunicationTime      = AMBA_SENSOR_COMMUNICATION_AT_NON_VBLANK,
        .FirstReflectedFrame    = 2,
        .FirstBadFrame          = 0,
        .NumBadFrames           = 0
    },
    .StrobeCtrlInfo = {0},
    .HdrIsSupport = 1,
};

/*-----------------------------------------------------------------------------------------------*\
 * Sensor register settings of each readout modes
\*-----------------------------------------------------------------------------------------------*/
IMX577_REG_s IMX577GlobalRegTable[IMX577_NUM_GOLBAL_REG] = {
    /* Register Version */
    {0x3C7E,  0x00},
    {0x3C7F,  0x02},
    /* Global Setting */
    {0x38A8,  0x1F},
    {0x38A9,  0xFF},
    {0x38AA,  0x1F},
    {0x38AB,  0xFF},
    {0x55D4,  0x00},
    {0x55D5,  0x00},
    {0x55D6,  0x07},
    {0x55D7,  0xFF},
    {0x55E8,  0x07},
    {0x55E9,  0xFF},
    {0x55EA,  0x00},
    {0x55EB,  0x00},
    {0x575C,  0x07},
    {0x575D,  0xFF},
    {0x575E,  0x00},
    {0x575F,  0x00},
    {0x5764,  0x00},
    {0x5765,  0x00},
    {0x5766,  0x07},
    {0x5767,  0xFF},
    {0x5974,  0x04},
    {0x5975,  0x01},
    {0x5F10,  0x09},
    {0x5F11,  0x92},
    {0x5F12,  0x32},
    {0x5F13,  0x72},
    {0x5F14,  0x16},
    {0x5F15,  0xBA},
    {0x5F17,  0x13},
    {0x5F18,  0x24},
    {0x5F19,  0x60},
    {0x5F1A,  0xE3},
    {0x5F1B,  0xAD},
    {0x5F1C,  0x74},
    {0x5F2D,  0x25},
    {0x5F5C,  0xD0},
    {0x6A22,  0x00},
    {0x6A23,  0x1D},
    {0x7BA8,  0x00},
    {0x7BA9,  0x00},
    {0x886B,  0x00},
    {0x9002,  0x0A},
    {0x9004,  0x1A},
    {0x9214,  0x93},
    {0x9215,  0x69},
    {0x9216,  0x93},
    {0x9217,  0x6B},
    {0x9218,  0x93},
    {0x9219,  0x6D},
    {0x921A,  0x57},
    {0x921B,  0x58},
    {0x921C,  0x57},
    {0x921D,  0x59},
    {0x921E,  0x57},
    {0x921F,  0x5A},
    {0x9220,  0x57},
    {0x9221,  0x5B},
    {0x9222,  0x93},
    {0x9223,  0x02},
    {0x9224,  0x93},
    {0x9225,  0x03},
    {0x9226,  0x93},
    {0x9227,  0x04},
    {0x9228,  0x93},
    {0x9229,  0x05},
    {0x922A,  0x98},
    {0x922B,  0x21},
    {0x922C,  0xB2},
    {0x922D,  0xDB},
    {0x922E,  0xB2},
    {0x922F,  0xDC},
    {0x9230,  0xB2},
    {0x9231,  0xDD},
    {0x9232,  0xB2},
    {0x9233,  0xE1},
    {0x9234,  0xB2},
    {0x9235,  0xE2},
    {0x9236,  0xB2},
    {0x9237,  0xE3},
    {0x9238,  0xB7},
    {0x9239,  0xB9},
    {0x923A,  0xB7},
    {0x923B,  0xBB},
    {0x923C,  0xB7},
    {0x923D,  0xBC},
    {0x923E,  0xB7},
    {0x923F,  0xC5},
    {0x9240,  0xB7},
    {0x9241,  0xC7},
    {0x9242,  0xB7},
    {0x9243,  0xC9},
    {0x9244,  0x98},
    {0x9245,  0x56},
    {0x9246,  0x98},
    {0x9247,  0x55},
    {0x9380,  0x00},
    {0x9381,  0x62},
    {0x9382,  0x00},
    {0x9383,  0x56},
    {0x9384,  0x00},
    {0x9385,  0x52},
    {0x9388,  0x00},
    {0x9389,  0x55},
    {0x938A,  0x00},
    {0x938B,  0x55},
    {0x938C,  0x00},
    {0x938D,  0x41},
};

/* Image Quality adjustment setting */
IMX577_REG_s IMX577ImageQualityRegTable[IMX577_NUM_IMG_QUALITY_REG] = {
    {0x9827,  0x20},
    {0x9830,  0x0A},
    {0x9833,  0x0A},
    {0x9834,  0x32},
    {0x9837,  0x22},
    {0x983C,  0x04},
    {0x983F,  0x0A},
    {0x994F,  0x00},
    {0x9A48,  0x06},
    {0x9A49,  0x06},
    {0x9A4A,  0x06},
    {0x9A4B,  0x06},
    {0x9A4E,  0x03},
    {0x9A4F,  0x03},
    {0x9A54,  0x03},
    {0x9A66,  0x03},
    {0x9A67,  0x03},
    {0xA2C9,  0x02},
    {0xA2CB,  0x02},
    {0xA2CD,  0x02},
    {0xB249,  0x3F},
    {0xB24F,  0x3F},
    {0xB290,  0x3F},
    {0xB293,  0x3F},
    {0xB296,  0x3F},
    {0xB299,  0x3F},
    {0xB2A2,  0x3F},
    {0xB2A8,  0x3F},
    {0xB2A9,  0x0D},
    {0xB2AA,  0x0D},
    {0xB2AB,  0x3F},
    {0xB2BA,  0x2F},
    {0xB2BB,  0x2F},
    {0xB2BC,  0x2F},
    {0xB2BD,  0x10},
    {0xB2C0,  0x3F},
    {0xB2C3,  0x3F},
    {0xB2D2,  0x3F},
    {0xB2DE,  0x20},
    {0xB2DF,  0x20},
    {0xB2E0,  0x20},
    {0xB2EA,  0x3F},
    {0xB2ED,  0x3F},
    {0xB2EE,  0x3F},
    {0xB2EF,  0x3F},
    {0xB2F0,  0x2F},
    {0xB2F1,  0x2F},
    {0xB2F2,  0x2F},
    {0xB2F9,  0x0E},
    {0xB2FA,  0x0E},
    {0xB2FB,  0x0E},
    {0xB759,  0x01},
    {0xB765,  0x3F},
    {0xB76B,  0x3F},
    {0xB7B3,  0x03},
    {0xB7B5,  0x03},
    {0xB7B7,  0x03},
    {0xB7BF,  0x03},
    {0xB7C1,  0x03},
    {0xB7C3,  0x03},
    {0xB7EF,  0x02},
    {0xB7F5,  0x1F},
    {0xB7F7,  0x1F},
    {0xB7F9,  0x1F},
};

/* External Clock Setting (2) */
IMX577_MODE_REG_s IMX577ExtClkRegTable[IMX577_NUM_EXTCLK_REG] = {
    /*
    readout    4056x  3840x  3840x  3840x
               3040   2160   2160   2160
               Norma  Normal Normal 2-DOL
               RAW10  RAW10  RAW10  RAW10
    Gbps/lane  2.1    1.6    1.6     1.6
    max. FPS   60.05  63.73  63.73  31.86
    */
    {0x0136,  {0x18,  0x18,  0x18,  0x18,  0x18, 0x18, 0x18, 0x18, 0x18}},
    {0x0137,  {0x00,  0x00,  0x00,  0x00,  0x00, 0x00, 0x00, 0x00, 0x00}},
};

/*-----------------------------------------------------------------------------------------------*\
 * Sensor register settings of each readout modes
\*-----------------------------------------------------------------------------------------------*/
IMX577_MODE_REG_s IMX577ModeRegTable[IMX577_NUM_READOUT_MODE_REG] = {
    /*
    readout    4056x 3840x 3840x 3840x
               3040  2160  2160  2160
               NormalNormalNormal2-DOL
               RAW10 RAW10 RAW10 RAW10
    Gbps/lane  2.1   1.6   1.6   1.6
    max. FPS   60.05 63.73 63.73 31.86

    --------------------------------------------------------------------------
    Address                   Value                       Register Name
    --------------------------------------------------------------------------
    */
    /* MIPI Setting (3) */
    {0x0112,  {0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A}},  /* CSI_DT_FMT_H */
    {0x0113,  {0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A}},  /* CSI_DT_FMT_L */
    {0x0114,  {0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03}},  /* CSI_LANE_MODE */
    /* Frame Horizontal Clock Count (2) */
    {0x0342,  {0x11, 0x11, 0x11, 0x11, 0x14, 0x0B, 0x0B, 0x11, 0x11}},  /* LINE_LENGTH_PCK[15:8] */
    {0x0343,  {0xA0, 0xA0, 0xA0, 0xA0, 0xA0, 0xA0, 0xA0, 0xA0, 0xA0}},  /* LINE_LENGTH_PCK[7:0] */
    /* Frame Vertical Clock Count (2) */
    {0x0340,  {0x0c, 0x12, 0x09, 0x12, 0x0A, 0x1A, 0x1A, 0x12, 0x09}},  /* FRM_LENGTH_LINES[15:8] PPP*/
    {0x0341,  {0x22, 0x70, 0x38, 0x70, 0x4F, 0x40, 0x40, 0x70, 0x38}},  /* FRM_LENGTH_LINES[7:0] PPP*/
    {0x3210,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* FLL_LSHIFT PPP*/
    /* Analog Crop, VisibleSize (8) */
    {0x0344,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* X_ADD_STA[12:8] */
    {0x0345,  {0x00, 0x00, 0x6C, 0x6C, 0x6C, 0x00, 0x00, 0x6C, 0x6C}},  /* X_ADD_STA[7:0] */
    {0x0346,  {0x00, 0x00, 0x01, 0x01, 0x01, 0x00, 0x00, 0x01, 0x01}},  /* Y_ADD_STA[12:8] */
    {0x0347,  {0x00, 0x00, 0xB8, 0xB8, 0x30, 0x00, 0x00, 0xB8, 0xB8}},  /* Y_ADD_STA[7:0] */
    {0x0348,  {0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F}},  /* X_ADD_END[12:8] */
    {0x0349,  {0xD7, 0xD7, 0x6B, 0x6B, 0x6B, 0xD7, 0xD7, 0x6B, 0x6B}},  /* X_ADD_END[7:0] */
    {0x034A,  {0x0B, 0x0B, 0x0A, 0x0A, 0x0A, 0x0B, 0x0B, 0x0A, 0x0A}},  /* Y_ADD_END[12:8] */
    {0x034B,  {0xDF, 0xDF, 0x27, 0x27, 0xAF, 0xDF, 0xDF, 0x27, 0x27}},  /* Y_ADD_END[7:0] */
    /* Mode Setting (2) */
    {0x0220,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* HDR_MODE */
    {0x0221,  {0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11}},  /* HDR_RESO_REDU_V */
    {0x0381,  {0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01}},  /* X_EVN_INC */
    {0x0383,  {0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01}},  /* X_ODD_INC */
    {0x0385,  {0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01}},  /* Y_EVN_INC */
    {0x0387,  {0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01}},  /* Y_ODD_INC */
    {0x0900,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x00, 0x00}},  /* BINNING_MODE */
    {0x0901,  {0x11, 0x11, 0x11, 0x11, 0x11, 0x22, 0x22, 0x11, 0x11}},  /* [7:4] BINNING_TYPE_H, [3:0] BINNING_TYPE_V */
    {0x0902,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x02, 0x00, 0x00}},  /* BINNING_WEIGHTING */
    {0x3140,  {0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02}},  /* HDR_FNCSEL */
    {0x3241,  {0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11}},
    {0x3242,  {0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01}},  /* DUBE_SUM_WEIGHT_MODE PPP*/
    {0x3250,  {0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03}},  /* SUB_WEIGHTING */
    {0x3F0D,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* ADBIT_MODE */
    {0x3F40,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* BINNING_PRIORITY_V PPP*/
    {0x3F41,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* BINNING_PRIORITY_H PPP*/
    {0x3F42,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* BINNING_TYPE_EXT_EN */
    {0x3F43,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* BINNING_TYPE_H_EXT */
    /* Digital Crop & Scali(11) */
    {0x0401,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* SCALE_MODE */
    {0x0404,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* SCALE_M[8] */
    {0x0405,  {0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10}},  /* SCALE_M[7:0] */
    {0x0408,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* DIG_CROP_X_OFFSET[12:8] */
    {0x0409,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x36, 0x00, 0x00}},  /* DIG_CROP_X_OFFSET[7:0] */
    {0x040A,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* DIG_CROP_Y_OFFSET[12:8] */
    {0x040B,  {0x00, 0x00, 0x00, 0x00, 0x88, 0x00, 0xDC, 0x00, 0x00}},  /* DIG_CROP_Y_OFFSET[7:0] */
    {0x040C,  {0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x07, 0x07, 0x0F, 0x0F}},  /* DIG_CROP_IMAGE_WIDTH[12:8] */
    {0x040D,  {0xD8, 0xD8, 0x00, 0x00, 0x00, 0xEC, 0x80, 0x00, 0x00}},  /* DIG_CROP_IMAGE_WIDTH[7:0] */
    {0x040E,  {0x0B, 0x0B, 0x08, 0x08, 0x08, 0x05, 0x04, 0x08, 0x08}},  /* DIG_CROP_IMAGE_HEIGHT[12:8] */
    {0x040F,  {0xE0, 0xE0, 0x70, 0x70, 0x70, 0xF0, 0x38, 0x70, 0x70}},  /* DIG_CROP_IMAGE_HEIGHT[7:0] */
    /* Output Crop (4) */
    {0x034C,  {0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x07, 0x07, 0x0F, 0x0F}},  /* X_OUT_SIZE[12:8] */
    {0x034D,  {0xD8, 0xD8, 0x00, 0x00, 0x04, 0xEC, 0x80, 0x00, 0x00}},  /* X_OUT_SIZE[7:0] */
    {0x034E,  {0x0B, 0x0B, 0x08, 0x08, 0x09, 0x05, 0x04, 0x08, 0x08}},  /* Y_OUT_SIZE[12:8] */
    {0x034F,  {0xE0, 0xE0, 0x70, 0x70, 0x0E, 0xF0, 0x38, 0x70, 0x70}},  /* Y_OUT_SIZE[7:0] */
    /* Clock Setting (15) */
    {0x0301,  {0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05}},  /* IVT_PXCK_DIV */
    {0x0303,  {0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02}},  /* IVT_SYCK_DIV */
    {0x0305,  {0x04, 0x04, 0x04, 0x04, 0x04, 0x04, 0x04, 0x04, 0x04}},  /* IVT_PREPLLCK_DIV */
    {0x0306,  {0x01, 0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x01, 0x01}},  /* IVT_PLL_MPY[10:8] */
    {0x0307,  {0x5E, 0x0A, 0x0A, 0x0A, 0x5C, 0xFA, 0xFA, 0x0A, 0x0A}},  /* IVT_PLL_MPY[7:0] */
    {0x0309,  {0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A}},  /* IOP_PXCK_DIV */
    {0x030B,  {0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01}},  /* IOP_SYCK_DIV */
    {0x030D,  {0x02, 0x02, 0x02, 0x02, 0x03, 0x02, 0x02, 0x02, 0x02}},  /* IOP_PREPLLCK_DIV */
    {0x030E,  {0x01, 0x01, 0x01, 0x01, 0x00, 0x01, 0x01, 0x01, 0x01}},  /* IOP_PLL_MPY[10:8] */
    {0x030F,  {0x5E, 0x5E, 0x5E, 0x5E, 0xCD, 0x5E, 0x5E, 0x5E, 0x5E}},  /* IOP_PLL_MPY[7:0] */
    {0x0310,  {0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00}},  /* PLL_MULT_DRIV */
    {0x0820,  {0x20, 0x18, 0x18, 0x18, 0x19, 0x17, 0x17, 0x18, 0x18}},  /* REQ_LINK_BIT_RATE_MBPS[31:24] */
    {0x0821,  {0xD0, 0xF0, 0xF0, 0xF0, 0xA0, 0x70, 0x70, 0xF0, 0xF0}},  /* REQ_LINK_BIT_RATE_MBPS[23:16] */
    {0x0822,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* REQ_LINK_BIT_RATE_MBPS[15:8] */
    {0x0823,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* REQ_LINK_BIT_RATE_MBPS[7:0] */
    /* Output Data Select Setting (2) */
    {0x3E20,  {0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01}},  /* PDAF_TYPE_SEL */
    {0x3E37,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* PDAF_CTRL1[7:0] */
    /* Power Save Setting (3) */
    {0x3F50,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* POWER_SAVE_ENABLE[0] */
    {0x3F56,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},
    {0x3F57,  {0x82, 0xAA, 0xAA, 0xAA, 0x98, 0x78, 0x78, 0xAA, 0xAA}},
    /* Other Setting (30) */
    {0x3C0A,  {0x5A, 0x5A, 0x5A, 0x5A, 0x5A, 0x73, 0x73, 0x5A, 0x5A}},
    {0x3C0B,  {0x55, 0x55, 0x55, 0x55, 0x55, 0x64, 0x64, 0x55, 0x55}},
    {0x3C0C,  {0x28, 0x28, 0x28, 0x28, 0x28, 0x5F, 0x5F, 0x28, 0x28}},
    {0x3C0D,  {0x07, 0x07, 0x07, 0x07, 0x07, 0x00, 0x00, 0x07, 0x07}},
    {0x3C0E,  {0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF}},
    {0x3C0F,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},
    {0x3C10,  {0x00, 0x00, 0x00, 0x00, 0x00, 0xA4, 0xA4, 0x00, 0x00}},
    {0x3C11,  {0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02}},
    {0x3C12,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},
    {0x3C13,  {0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03}},
    {0x3C14,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x00}},
    {0x3C15,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x04, 0x00, 0x00}},
    {0x3C16,  {0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x15, 0x15, 0x0C, 0x0C}},
    {0x3C17,  {0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x15, 0x15, 0x0C, 0x0C}},
    {0x3C18,  {0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x15, 0x15, 0x0C, 0x0C}},
    {0x3C19,  {0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x15, 0x15, 0x0A, 0x0A}},
    {0x3C1A,  {0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x15, 0x15, 0x0A, 0x0A}},
    {0x3C1B,  {0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x15, 0x15, 0x0A, 0x0A}},
    {0x3C1C,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x06, 0x00, 0x00}},
    {0x3C1D,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x06, 0x00, 0x00}},
    {0x3C1E,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x06, 0x00, 0x00}},
    {0x3C1F,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x06, 0x00, 0x00}},
    {0x3C20,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x06, 0x00, 0x00}},
    {0x3C21,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x06, 0x00, 0x00}},
    {0x3C22,  {0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F}},
    {0x3C23,  {0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A}},
    {0x3E35,  {0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01}},
    {0x3F4A,  {0x03, 0x03, 0x03, 0x03, 0x03, 0x01, 0x01, 0x03, 0x03}},
    {0x3F4B,  {0xBF, 0xBF, 0xBF, 0xBF, 0xBF, 0x7F, 0x7F, 0xBF, 0xBF}},
    {0x3F26,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},
    /* Integration Time Setting (4) */
    {0x0202,  {0x0C, 0x0C, 0x08, 0x08, 0x0A, 0x1A, 0x1A, 0x08, 0x08}},  /* COARSE_INTEG_TIME[15:8] */
    {0x0203,  {0x12, 0x12, 0xA2, 0xA2, 0x39, 0x2A, 0x2A, 0xA2, 0xA2}},  /* COARSE_INTEG_TIME[7:0] */
    {0x0224,  {0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01}},  /* ST_COARSE_INTEG_TIME[15:8] */
    {0x0225,  {0xF4, 0xF4, 0xF4, 0xF4, 0xF4, 0xF4, 0xF4, 0xF4, 0xF4}},  /* ST_COARSE_INTEG_TIME[7:0] */
    /* Gain Setting (2) */
    {0x0204,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* ANA_GAIN_GLOBAL[9:8] */
    {0x0205,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* ANA_GAIN_GLOBAL[7:0] */
    {0x0216,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* ST_ANA_GAIN_GLOBAL[9:8] */
    {0x0217,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* ST_ANA_GAIN_GLOBAL[7:0] */
    {0x020E,  {0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01}},  /* DIG_GAIN_GR[15:8] */
    {0x020F,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* DIG_GAIN_GR[7:0] */
    {0x0210,  {0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01}},  /* DIG_GAIN_R[15:8] */
    {0x0211,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* DIG_GAIN_R[7:0] */
    {0x0212,  {0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01}},  /* DIG_GAIN_B[15:8] */
    {0x0213,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* DIG_GAIN_B[7:0] */
    {0x0214,  {0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01}},  /* DIG_GAIN_GB[15:8] */
    {0x0215,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* DIG_GAIN_GB[7:0] */
    /* DOL Setting (9) */
    {0x00E3,  {0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00}},  /* DOL_EN */
    {0x00E4,  {0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00}},  /* DOL_NUM */
    {0x00E5,  {0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x00, 0x00}},  /* DOL_OUTPUT_FMT */
    {0x00FC,  {0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A}},  /* DOL_CSI_DT_FMT_H_2ND */
    {0x00FD,  {0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A}},  /* DOL_CSI_DT_FMT_L_2ND */
    {0x00FE,  {0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A}},  /* DOL_CSI_DT_FMT_H_3RD */
    {0x00FF,  {0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A, 0x0A}},  /* DOL_CSI_DT_FMT_L_3RD */
    {0x3E10,  {0x01, 0x01, 0x01, 0x01, 0x00, 0x00,0x00, 0x01, 0x01}},   /* CSI_CH_ID_DOL_2ND */
    {0x3E11,  {0x02, 0x02, 0x02, 0x02, 0x00, 0x00,0x00, 0x02, 0x02}},   /* CSI_CH_ID_DOL_3RD */
    /* DOL Setting (6) */
    {0x00E6,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* DOL_FRAME_OFFSET_2ND_MSB */
    {0x00E7,  {0x00, 0x00, 0x00, 0x00, 0x9E, 0x00, 0x00, 0x00, 0x00}},  /* DOL_FRAME_OFFSET_2ND_LSB */
    {0x00EA,  {0x00, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00}},  /* DOL_CIT_1ST_MSB */
    {0x00EB,  {0x00, 0x00, 0x00, 0x00, 0x84, 0x00, 0x00, 0x00, 0x00}},  /* DOL_CIT_1ST_LSB */
    {0x00EC,  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},  /* DOL_CIT_2ND_MSB */
    {0x00ED,  {0x00, 0x00, 0x00, 0x00, 0x88, 0x00, 0x00, 0x00, 0x00}},  /* DOL_CIT_2ND_LSB */
};

const AMBA_SENSOR_OUTPUT_INFO_s IMX577OutputInfo[IMX577_NUM_MODE] = {
    /* IMX577_4056_3040_60P     */{ 2100000000, 4, 10, AMBA_SENSOR_BAYER_PATTERN_RG, 4056, 3040, { 0, 0, 4056, 3040}, {0}},
    /* IMX577_3840_2160_30P     */{ 1596000000, 4, 10, AMBA_SENSOR_BAYER_PATTERN_RG, 4056, 3040, { 0, 0, 4056, 3040}, {0}},
    /* IMX577_3840_2160_60P     */{ 1596000000, 4, 10, AMBA_SENSOR_BAYER_PATTERN_RG, 3840, 2160, { 0, 0, 3840, 2160}, {0}},
    /* IMX577_3840_2160_30P     */{ 1596000000, 4, 10, AMBA_SENSOR_BAYER_PATTERN_RG, 3840, 2160, { 0, 0, 3840, 2160}, {0}},
    /* IMX577_3840_2160_30P_HDR */{ 1640000000, 4, 10, AMBA_SENSOR_BAYER_PATTERN_RG, 3844, 4636, { 4, 0, 3840, 4636}, {0}},
    /* IMX577_2028_1520_A30P    */{ 1500000000, 4, 10, AMBA_SENSOR_BAYER_PATTERN_RG, 2028, 1520, { 0, 0, 2028, 1520}, {0}},
    /* IMX577_1920_1080_A30P    */{ 1500000000, 4, 10, AMBA_SENSOR_BAYER_PATTERN_RG, 1920, 1080, { 0, 0, 1920, 1080}, {0}},
    /* IMX577_3840_2160_A30P    */{ 1597596000, 4, 10, AMBA_SENSOR_BAYER_PATTERN_RG, 3840, 2160, { 0, 0, 3840, 2160}, {0}},
    /* IMX577_3840_2160_A60P    */{ 1597596000, 4, 10, AMBA_SENSOR_BAYER_PATTERN_RG, 3840, 2160, { 0, 0, 3840, 2160}, {0}},
};

const AMBA_SENSOR_INPUT_INFO_s IMX577InputInfo[IMX577_NUM_MODE] = {
    /* IMX577_4056_3040_60P     */{{   0,   0, 4056, 3040}, {  AMBA_SENSOR_SUBSAMPLE_NORMAL, 1, 1}, {  AMBA_SENSOR_SUBSAMPLE_NORMAL, 1, 1}, 1},
    /* IMX577_4056_3040_30P     */{{   0,   0, 4056, 3040}, {  AMBA_SENSOR_SUBSAMPLE_NORMAL, 1, 1}, {  AMBA_SENSOR_SUBSAMPLE_NORMAL, 1, 1}, 1},
    /* IMX577_3840_2160_60P     */{{ 108, 440, 3840, 2160}, {  AMBA_SENSOR_SUBSAMPLE_NORMAL, 1, 1}, {  AMBA_SENSOR_SUBSAMPLE_NORMAL, 1, 1}, 1},
    /* IMX577_3840_2160_30P     */{{ 108, 440, 3840, 2160}, {  AMBA_SENSOR_SUBSAMPLE_NORMAL, 1, 1}, {  AMBA_SENSOR_SUBSAMPLE_NORMAL, 1, 1}, 1},
    /* IMX577_3840_2160_30P_HDR */{{ 108, 440, 3840, 2160}, {  AMBA_SENSOR_SUBSAMPLE_NORMAL, 1, 1}, {  AMBA_SENSOR_SUBSAMPLE_NORMAL, 1, 1}, 1},
    /* IMX577_2028_1520_A30P    */{{   0,   0, 4056, 3040}, {  AMBA_SENSOR_SUBSAMPLE_BINNING, 1, 2}, {  AMBA_SENSOR_SUBSAMPLE_BINNING, 1, 2}, 1},
    /* IMX577_1920_1080_A30P    */{{ 108, 440, 3840, 2160}, {  AMBA_SENSOR_SUBSAMPLE_BINNING, 1, 2}, {  AMBA_SENSOR_SUBSAMPLE_BINNING, 1, 2}, 1},
    /* IMX577_3840_2160_A30P    */{{ 108, 440, 3840, 2160}, {  AMBA_SENSOR_SUBSAMPLE_NORMAL, 1, 1}, {  AMBA_SENSOR_SUBSAMPLE_NORMAL, 1, 1}, 1},
    /* IMX577_3840_2160_A60P    */{{ 108, 440, 3840, 2160}, {  AMBA_SENSOR_SUBSAMPLE_NORMAL, 1, 1}, {  AMBA_SENSOR_SUBSAMPLE_NORMAL, 1, 1}, 1},
};

IMX577_MODE_INFO_s IMX577ModeInfoList[IMX577_NUM_MODE] = {
    /* IMX577_4056_3040_60P       */{{ 24000466, 4512, 3106, {.Interlace = 0, .TimeScale =  60000, .NumUnitsInTick = 1001}}, 0.0f},
    /* IMX577_4056_3040_30P       */{{ 23994772, 4512, 4720, {.Interlace = 0, .TimeScale =  30000, .NumUnitsInTick = 1001}}, 0.0f},
    /* IMX577_3840_2160_60P       */{{ 23994772, 4512, 2360, {.Interlace = 0, .TimeScale =  60000, .NumUnitsInTick = 1001}}, 0.0f},
    /* IMX577_3840_2160_30P       */{{ 23994772, 4512, 4720, {.Interlace = 0, .TimeScale =  30000, .NumUnitsInTick = 1001}}, 0.0f},
    /* IMX577_3840_2160_30P_HDR   */{{ 24000000, 4147, 5278, {.Interlace = 0, .TimeScale =  30000, .NumUnitsInTick = 1001}}, 0.0f},
    /* IMX577_2028_1520_A30P      */{{ 23998464, 2976, 6720, {.Interlace = 0, .TimeScale =     30, .NumUnitsInTick =    1}}, 0.0f},
    /* IMX577_1920_1080_A30P      */{{ 23998464, 2976, 6720, {.Interlace = 0, .TimeScale =     30, .NumUnitsInTick =    1}}, 0.0f},
    /* IMX577_3840_2160_A30P      */{{ 24018767, 4512, 4720, {.Interlace = 0, .TimeScale =     30, .NumUnitsInTick =    1}}, 0.0f},
    /* IMX577_3840_2160_A60P      */{{ 24018767, 4512, 2360, {.Interlace = 0, .TimeScale =     60, .NumUnitsInTick =    1}}, 0.0f},

};

const AMBA_SENSOR_HDR_INFO_s IMX577HdrInfo[IMX577_NUM_MODE] = {
    [IMX577_4056_3040_60P] = {0},
    [IMX577_4056_3040_30P] = {0},
    [IMX577_3840_2160_60P] = {0},
    [IMX577_3840_2160_30P] = {0},
    [IMX577_2028_1520_A30P] = {0},
    [IMX577_1920_1080_A30P] = {0},
    [IMX577_3840_2160_A30P] = {0},
    [IMX577_3840_2160_A60P] = {0},
    [IMX577_3840_2160_30P_HDR] = {
        .HdrType = AMBA_SENSOR_HDR_TYPE_MULTI_SLICE,
        .ActiveChannels = 2,
        .ChannelInfo = {
            [0] = {
                .EffectiveArea = {0, 0, 3840, 2160},
                .OpticalBlackPixels = {0},
                .ShutterSpeedCtrlInfo = {AMBA_SENSOR_COMMUNICATION_AT_NON_VBLANK, 2, 0, 0},
                .OutputFormatCtrlInfo = {AMBA_SENSOR_COMMUNICATION_AT_NON_VBLANK, 2, 0, 0},
                .MaxExposureLine = 2180,
                .MinExposureLine = 8,
            },
            [1] = {
                .EffectiveArea = {3840, 158, 3840, 2160},
                .OpticalBlackPixels = {0},
                .ShutterSpeedCtrlInfo = {AMBA_SENSOR_COMMUNICATION_AT_NON_VBLANK, 2, 0, 0},
                .OutputFormatCtrlInfo = {AMBA_SENSOR_COMMUNICATION_AT_NON_VBLANK, 2, 0, 0},
                .MaxExposureLine = 136,
                .MinExposureLine = 8,
            },
            [2] = {
                .EffectiveArea = {0},
                .OpticalBlackPixels = {0},
                .ShutterSpeedCtrlInfo = {0},
                .OutputFormatCtrlInfo = {0},
                .MaxExposureLine = 0U,
                .MinExposureLine = 0U,
            },
            [3] = {
                .EffectiveArea = {0},
                .OpticalBlackPixels = {0},
                .ShutterSpeedCtrlInfo = {0},
                .OutputFormatCtrlInfo = {0},
                .MaxExposureLine = 0U,
                .MinExposureLine = 0U,
            },
        },
    }
};

