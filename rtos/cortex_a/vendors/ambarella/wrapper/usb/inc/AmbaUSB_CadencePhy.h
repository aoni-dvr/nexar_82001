/**
 *  @file AmbaUSB_CadencePhy.h
 *
 *  Copyright (c) 2021 Ambarella International LP
 *
 *  This file and its contents ("Software") are protected by intellectual property rights including, without limitation,
 *  U.S. and/or foreign copyrights.  This Software is also the confidential and proprietary information of Ambarella, Inc.
 *  and its licensors.  You may not use, reproduce, disclose, distribute, modify, or otherwise prepare derivative works
 *  of this Software or any portion thereof except pursuant to a signed license agreement or nondisclosure agreement with
 *  Ambarella, Inc. or its authorized affiliates.  In the absence of such an agreement, you agree to promptly notify and
 *  return this Software to Ambarella, Inc.
 *
 *  THIS SOFTWARE IS PROVIDED "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 *  WARRANTIES OF NON-INFRINGEMENT, MERCHANTABILITY, AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL
 *  AMBARELLA, INC. OR ITS AFFILIATES BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 *  DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
 *  COMPUTER FAILURE OR MALFUNCTION; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 *  CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 *  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 *  @details Cadence IP USB PHY header file.
 */

#ifndef AMBAUSB_CADENCE_PHY_H
#define AMBAUSB_CADENCE_PHY_H

#ifndef AMBA_TYPES_H
#include <AmbaTypes.h>
#endif

#define CMD_TX_LANE (0x01UL << 14UL)
#define CMD_RX_LANE (0x02UL << 14UL)
#define LANE_0 (0x0UL)
#define LANE_1 (0x1UL << 9UL)
#define LANE_2 (0x2UL << 9UL)
#define LANE_3 (0x3UL << 9UL)
#define LANE_4 (0x4UL << 9UL)
#define LANE_5 (0x5UL << 9UL)
#define LANE_6 (0x6UL << 9UL)
#define LANE_7 (0x6UL << 9UL)

#define TX_LANE (CMD_TX_LANE | LANE_0)
#define RX_LANE (CMD_RX_LANE | LANE_0)

// USB3PHY registers
#define PHY_OFFSET_SHIFT                       (4U)
#define USB3PHY_PHY_PLL_CFG                    ((0xC00EU * PHY_OFFSET_SHIFT)) // 11_0_0000 : 0000 : 1101
#define USB3PHY_PIPE_GEN2_PRE_CFG0             ((0xC01CU * PHY_OFFSET_SHIFT)) // 11_0_0000 : 0001 : 1100, PHY_PIPE_USB3_GEN2_PRE_CFG0
#define USB3PHY_PIPE_GEN2_POST_CFG0            ((0xC01EU * PHY_OFFSET_SHIFT)) // 11_0_0000 : 0000 : 1110, PHY_PIPE_USB3_GEN2_POST_CFG0
#define USB3PHY_PIPE_GEN2_POST_CFG1            ((0xC01FU * PHY_OFFSET_SHIFT)) // 11_0_0000 : 0000 : 1111, PHY_PIPE_USB3_GEN2_POST_CFG1
#define USB3PHY_CMN_SSM_BANDGAP_TMR            ((0x0021U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0001 : 00001
#define USB3PHY_CMN_SSM_BIAS_TMR               ((0x0022U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0001 : 00010
#define USB3PHY_CMN_PLLSM0_PLLEN_TMR           ((0x0029U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0001 : 01001
#define USB3PHY_CMN_PLLSM0_PLLPRE_TMR          ((0x002AU * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0001 : 01010
#define USB3PHY_CMN_PLLSM0_PLLLOCK_TMR         ((0x002CU * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0001 : 01100
#define USB3PHY_CMN_PLLSM1_PLLEN_TMR           ((0x0031U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0001 : 10001
#define USB3PHY_CMN_PLLSM1_PLLPRE_TMR          ((0x0032U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0001 : 10010
#define USB3PHY_CMN_PLLSM1_PLLLOCK_TMR         ((0x0034U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0001 : 10100
#define USB3PHY_CMN_BGCAL_INIT_TMR             ((0x0064U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0011 : 00100
#define USB3PHY_CMN_BGCAL_ITER_TMR             ((0x0065U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0011 : 00101
#define USB3PHY_CMN_IBCAL_INIT_TMR             ((0x0074U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0011 : 10100
#define USB3PHY_CMN_IBCAL_ITER_TMR             ((0x0075U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0011 : 10101
#define USB3PHY_CMN_TXPUCAL_INIT_TMR           ((0x0104U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 1000 : 00100
#define USB3PHY_CMN_TXPUCAL_ITER_TMR           ((0x0105U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 1000 : 00101
#define USB3PHY_CMN_TXPDCAL_INIT_TMR           ((0x010CU * PHY_OFFSET_SHIFT)) // 00_0_0000 : 1000 : 01100
#define USB3PHY_CMN_TXPDCAL_ITER_TMR           ((0x010DU * PHY_OFFSET_SHIFT)) // 00_0_0000 : 1000 : 01101
#define USB3PHY_CMN_RXCAL_INIT_TMR             ((0x0114U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 1000 : 10100
#define USB3PHY_CMN_RXCAL_ITER_TMR             ((0x0115U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 1000 : 10101
#define USB3PHY_CMN_SD_CAL_INIT_TMR            ((0x0124U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 1001 : 00100
#define USB3PHY_CMN_SD_CAL_ITER_TMR            ((0x0125U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 1001 : 00101
#define USB3PHY_CMN_SD_CAL_REFTIM_START        ((0x0126U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 1001 : 00110
#define USB3PHY_CMN_SD_CAL_PLLCNT_START        ((0x0128U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 1001 : 01000
#define USB3PHY_RX_SDCAL0_INIT_TMR             (((RX_LANE + 0x0044U) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 0010 : 00100
#define USB3PHY_RX_SDCAL0_ITER_TMR             (((RX_LANE + 0x0045U) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 0010 : 00101
#define USB3PHY_RX_SDCAL1_INIT_TMR             (((RX_LANE + 0x004CU) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 0010 : 01100
#define USB3PHY_RX_SDCAL1_ITER_TMR             (((RX_LANE + 0x004DU) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 0010 : 01101
#define USB3PHY_TX_RCVDET_ST_TMR               (((TX_LANE + 0x0123U) * PHY_OFFSET_SHIFT)) // 01_m_nnnn : 1001 : 00011
#define USB3PHY_CMN_PLL0_DSM_DIAG_M0           ((0x0094U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0100 : 10100
#define USB3PHY_CMN_PLL0_VCOCAL_INIT_TMR       ((0x0084U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0100 : 00100
#define USB3PHY_CMN_PLL0_VCOCAL_ITER_TMR       ((0x0085U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0100 : 00101
#define USB3PHY_CMN_PLL0_VCOCAL_REFTIM_START   ((0x0086U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0100 : 00110
#define USB3PHY_CMN_PLL0_VCOCAL_TCTRL          ((0x0082U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0100 : 00010
#define USB3PHY_CMN_PLL1_VCOCAL_TCTRL          ((0x00C2U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0110 : 00010
#define USB3PHY_CMN_PDIAG_PLL0_ITRIM_M0        ((0x01A3U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 1101 : 00011
#define USB3PHY_CMN_PDIAG_PLL0_CP_PADJ_M0      ((0x01A4U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 1101 : 00100
#define USB3PHY_CMN_PDIAG_PLL0_CP_IADJ_M0      ((0x01A5U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 1101 : 00101
#define USB3PHY_CMN_PDIAG_PLL0_FILT_PADJ_M0    ((0x01A6U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 1101 : 00110
#define USB3PHY_CMN_PLL0_INTDIV_M0             ((0x0090U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0100 : 10000
#define USB3PHY_CMN_PLL0_FRACDIVL_M0           ((0x0091U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0100 : 10001
#define USB3PHY_CMN_PLL0_FRACDIVH_M0           ((0x0092U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0100 : 10010
#define USB3PHY_CMN_PLL0_HIGH_THR_M0           ((0x0093U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0100 : 10011
#define USB3PHY_CMN_PDIAG_PLL0_CTRL_M0         ((0x01A0U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 1101 : 00000
#define USB3PHY_CMN_PLL0_VCOCAL_PLLCNT_START   ((0x0088U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0100 : 01000
#define USB3PHY_CMN_PLL0_SS_CTRL1_M0           ((0x0098U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0100 : 11000
#define USB3PHY_CMN_PLL0_SS_CTRL2_M0           ((0x0099U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0100 : 11001
#define USB3PHY_CMN_PLL0_SS_CTRL3_M0           ((0x009AU * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0100 : 11010
#define USB3PHY_CMN_PLL0_SS_CTRL4_M0           ((0x009BU * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0100 : 11011
#define USB3PHY_CMN_PLL0_LOCK_REFCNT_START     ((0x009CU * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0100 : 11100
#define USB3PHY_CMN_PLL0_LOCK_PLLCNT_START     ((0x009EU * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0100 : 11110
#define USB3PHY_CMN_PLL0_LOCK_PLLCNT_THR       ((0x009FU * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0100 : 11111
#define USB3PHY_CMN_PDIAG_PLL0_CLK_SEL_M0      ((0x01A1U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 1101 : 00001
#define USB3PHY_CMN_CDIAG_CDB_PWRI_OVRD        ((0x0041U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0010 : 00001
#define USB3PHY_CMN_CDIAG_XCVRC_PWRI_OVRD      ((0x0047U * PHY_OFFSET_SHIFT)) // 00_0_0000 : 0010 : 00111
#define USB3PHY_TX_PSC_A0                      (((TX_LANE + 0x0100U) * PHY_OFFSET_SHIFT)) // 01_m_nnnn : 1000 : 00000
#define USB3PHY_TX_PSC_A1                      (((TX_LANE + 0x0101U) * PHY_OFFSET_SHIFT)) // 01_m_nnnn : 1000 : 00001
#define USB3PHY_TX_PSC_A2                      (((TX_LANE + 0x0102U) * PHY_OFFSET_SHIFT)) // 01_m_nnnn : 1000 : 00010
#define USB3PHY_TX_PSC_A3                      (((TX_LANE + 0x0103U) * PHY_OFFSET_SHIFT)) // 01_m_nnnn : 1000 : 00011
#define USB3PHY_TX_TXCC_CTRL                   (((TX_LANE + 0x0040U) * PHY_OFFSET_SHIFT)) // 01_m_nnnn : 0010 : 00000
#define USB3PHY_TX_TXCC_CPOST_MULT_01          (((TX_LANE + 0x004DU) * PHY_OFFSET_SHIFT)) // 01_m_nnnn : 0010 : 01101
#define USB3PHY_RX_PSC_A0                      (((RX_LANE + 0x0000U) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 0000 : 00000
#define USB3PHY_RX_PSC_A1                      (((RX_LANE + 0x0001U) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 0000 : 00001
#define USB3PHY_RX_PSC_A2                      (((RX_LANE + 0x0002U) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 0000 : 00010
#define USB3PHY_RX_PSC_A3                      (((RX_LANE + 0x0003U) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 0000 : 00011
#define USB3PHY_XCVR_DIAG_PSC_OVRD             (((TX_LANE + 0x00EBU) * PHY_OFFSET_SHIFT)) // 01_m_nnnn : 0111 : 01011
#define USB3PHY_RX_SIGDET_HL_FILT_TMR          (((RX_LANE + 0x0090U) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 0100 : 10000
#define USB3PHY_RX_REE_GCSM1_CTRL              (((RX_LANE + 0x0108U) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 1000 : 01000
#define USB3PHY_RX_REE_ATTEN_THR               (((RX_LANE + 0x0149U) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 1010 : 01001
#define USB3PHY_RX_REE_TAP1_CLIP               (((RX_LANE + 0x0171U) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 1011 : 10001
#define USB3PHY_RX_REE_TAP2TON_CLIP            (((RX_LANE + 0x0172U) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 1011 : 10010
#define USB3PHY_RX_REE_SMGM_CTRL1              (((RX_LANE + 0x0177U) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 1011 : 10111
#define USB3PHY_RX_REE_SMGM_CTRL2              (((RX_LANE + 0x0178U) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 1011 : 11000
#define USB3PHY_RX_DIAG_SIGDET_TUNE            (((RX_LANE + 0x01E8U) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 1111 : 01000
#define USB3PHY_RX_DIAG_NQST_CTRL              (((RX_LANE + 0x01E5U) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 1111 : 00101
#define USB3PHY_RX_DIAG_DFE_AMP_TUNE_2         (((RX_LANE + 0x01E2U) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 1111 : 00010
#define USB3PHY_RX_DIAG_DFE_AMP_TUNE_3         (((RX_LANE + 0x01E3U) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 1111 : 00011
#define USB3PHY_RX_DIAG_PI_CAP                 (((RX_LANE + 0x01F5U) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 1111 : 10101
#define USB3PHY_RX_DIAG_PI_RATE                (((RX_LANE + 0x01F4U) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 1111 : 10100
#define USB3PHY_RX_DIAG_ACYA                   (((RX_LANE + 0x01FFU) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 1111 : 11111
#define USB3PHY_RX_CDRLF_CNFG                  (((RX_LANE + 0x0080U) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 0100 : 00000
#define USB3PHY_RX_CDRLF_CNFG3                 (((RX_LANE + 0x0082U) * PHY_OFFSET_SHIFT)) // 10_m_nnnn : 0100 : 00010
#define USB3PHY_XCVR_DIAG_PLLDRC_CTRL          (((TX_LANE + 0x00E5U) * PHY_OFFSET_SHIFT)) // 01_m_nnnn : 0111 : 00101
#define USB3PHY_XCVR_DIAG_HSCLK_SEL            (((TX_LANE + 0x00E6U) * PHY_OFFSET_SHIFT)) // 01_m_nnnn : 0111 : 00110
#define USB3PHY_XCVR_DIAG_HSCLK_DIV            (((TX_LANE + 0x00E7U) * PHY_OFFSET_SHIFT)) // 01_m_nnnn : 0111 : 00111

void   USBCDNS3_PHYUp(void);
void   USBCDNS3_PHYDown(void);

#endif

